/* Query Loop
 ----------------------------------------------------------------------------- */

.wp-block-query {
    // Ensure post grids respect the theme blockGap setting.
    .wp-block-post-template {
        &.is-flex-container {
            gap: var(--wp--style--block-gap);

            @media (max-width: 781px) {
                 &> li {
                    flex-basis: 100%;
                }
            }

            @media (min-width: 782px) {

                &.columns-2 > li {
                    width: calc( 50% - 0.5 * var(--wp--style--block-gap) );
                }
            
                &.columns-3 > li {
                    width: calc( 33.333% - ( 2 * var(--wp--style--block-gap) ) / 3 );
                }
            
                &.columns-4 > li {
                    width: calc( 25% - ( 3 * var(--wp--style--block-gap) ) / 4 );
                }
            
                &.columns-5 > li {
                    width: calc( 20% - ( 4 * var(--wp--style--block-gap) ) / 5 );
                }
            
                &.columns-6 > li {
                    width: calc( 16.666% - ( 5 * var(--wp--style--block-gap) ) / 6 );
                }
            }

            /*
             * If we are using a Group block to contain all post content in the Query loop
             * and we are using a grid layout, we want to ensure the Group blocks are all
             * same height, i.e. fill each column.
             */
            li > .wp-block-group {
                height: 100%;
            }
        }
    }

    /* Block Style: 2x Gap
     --------------------------------------------- */

    @media (min-width: 782px) {

        &.is-style-2x-gap {
            .wp-block-post-template {
                &:not(.is-flex-container) > * + * {
                    margin-block-start: calc( 2 * var( --wp--style--block-gap ) );
                    margin-block-end: 0;
                }

                &.is-flex-container {
                    gap: calc( 2 * var(--wp--style--block-gap) );
                
                    &.columns-2 > li {
                        width: calc( 50% - var(--wp--style--block-gap) );
                    }

                    &.columns-3 > li {
                        width: calc( 33.333% - ( 4 * var(--wp--style--block-gap) ) / 3 );
                    }

                    &.columns-4 > li {
                        width: calc( 25% - ( 6 * var(--wp--style--block-gap) ) / 4 );
                    }

                    &.columns-5 > li {
                        width: calc( 20% - ( 8 * var(--wp--style--block-gap) ) / 5 );
                    }

                    &.columns-6 > li {
                        width: calc( 16.666% - ( 10 * var(--wp--style--block-gap) ) / 6 );
                    }
                }
            }
        }   
    }
}